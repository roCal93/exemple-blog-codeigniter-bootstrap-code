{% extends 'base.twig' %}

{% block content %}

<h1 class="my-4">{{new.title}}</h1>

<div class="article-meta mb-4">
    <em><i class="bi bi-calendar"> </i>{{ formattedDate }}</em>
    <span class="ms-3"> <i class="bi bi-person"></i>{{author}}</span>
</div>

{% if isOwner or isAdmin %}
    <div class="d-flex gap-2 mb-4">
        <a href="{{ route_to('editIndex', new.id) }}" class="btn btn-primary">
            <i class="bi bi-pencil"></i> Modifier
        </a>
        
        <form action="{{ route_to('deleteIndex', new.id) }}" method="post" class="d-inline"
              onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet article?');">
            <input type="hidden" name="{{ csrf_token() }}" value="{{ csrf_hash() }}" />
            <button type="submit" class="btn btn-danger">
                <i class="bi bi-trash"></i> Supprimer
            </button>
        </form>

        <form action="{{ route_to('updateStateIndex', new.id) }}" method="post" class="d-inline">
            <input type="hidden" name="{{ csrf_token() }}" value="{{ csrf_hash() }}" />
            <button type="submit" class="btn {{ new.state ? 'btn-warning' : 'btn-success' }}">
                <i class="bi {{ new.state ? 'bi-eye-slash' : 'bi-eye' }}"></i>
                {{ new.state ? 'Privatiser' : 'Publier' }}
            </button>
        </form>
    </div>
{% endif %}

<div class="article-content">
    <p>{{ new.content }}</p>
</div>
{% endblock %}